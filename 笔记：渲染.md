<!-- TOC -->

- [渲染流程](#渲染流程)
    - [应用阶段](#应用阶段)
    - [几何阶段](#几何阶段)
    - [光栅化阶段](#光栅化阶段)
    - [逐片元操作](#逐片元操作)
    - [后处理](#后处理)
- [信息](#信息)
- [Unity](#unity)
- [Unreal](#unreal)
    - [贴图类型](#贴图类型)
- [PBR](#pbr)
- [GPUSkinMesh](#gpuskinmesh)
- [FFT Ocean](#fft-ocean)

<!-- /TOC -->

# 渲染流程 #

## 应用阶段 ##
输出：渲染图元（点、线、三角面等）
1. 准备场景数据，摄像机位置、视锥体、场景内的模型、光源
2. 粗粒度剔除，把不可见的物体剔除，不交给几何阶段处理
3. 设置每个模型的渲染状态，使用的shader、纹理、材质（漫反射颜色、高光反射颜色等）
## 几何阶段 ##
输出：屏幕的顶点信息，处理要绘制的几何相关（决定图元、如何绘制、在哪绘制）
顶点着色器，曲面细分，几何着色器，顶点裁剪，屏幕映射
## 光栅化阶段 ##
三角形（点/线）设置和遍历，片元着色器
## 逐片元操作 ## 
裁剪测试，透明度测试，深度测试，模板测试，混合
## 后处理 ##

渲染管线确定场景中对象的显示方式，分为三个主要阶段。
1. 剔除；它列出了需要渲染的对象，最好是那些对摄像机可见的对象（视锥体剔除）和其他对象不遮挡的对象（遮挡剔除）。
2. 渲染，将这些对象绘制到基于像素的缓冲区中（通过正确的光照以及它们的一些属性）。
3. 在这些缓冲区上执行后期处理操作，例如，应用颜色分级、泛光和景深，从而生成发送到显示设备的最终输出帧。

# 信息 #
1. 着色器（Shader）是在图形处理单元 (GPU) 上运行的程序或程序集合的通用名称。
2. 计算着色器：计算着色器允许程序员利用 GPU 的大量并行处理能力，用于任何类型的数学运算，如光照剔除、粒子物理或体积模拟。
3. 前向渲染根据影响对象的光源在一个或多个通道中渲染每个对象。光源本身也可以通过前向渲染进行不同的处理，具体取决于它们的设置和强度。
4. 帧率：每秒的帧数，等于帧数/时间
5. Shader语言
- HLSL：基于DirectX的High Level Shading Language
- GLSL：基于OpenGL的OpenGL Shading Language
- CG：NVIDIA（英伟达）公司的C for Graphic，更底层，和HLSL差不多
Unity用HLSL、CG或基本的GLSL
6. GPU计算不依赖其他类型数据，且独立运算快（控制弱，计算强）
7. 光栅化：像素中心是否在三角形内
8. sRGB是人眼看的才开启（基本纹理、UI），像法线（Normal、紫、细节）、高度（形变）、反射（发光）、粗糙度这些不用开启。
9. 一般UI是没有深度测试的，绘制顺序会直接导致渲染深度不同。而一般3D物体有深度测试，绘制顺序不影响最终效果
10. 对于透明物体从远到近渲染，对于不透明物体从近到远绘制
11. 渲染队列值越小越先渲染；
12. 离相机越近深度值越大，深度值比深度缓存区大的才会通过深度测试（更近）
13. 都是透明物体，如果开启深度测试，重合部分容易出现错误

# Unity #
1. [渲染管线和光照解决方案](https://docs.unity.cn/cn/2020.3/Manual/BestPracticeLightingPipelines.html)
2. 8.Unity内的Tex Normal: 最高    MainTex：中等   Emit：最低

# Unreal #
## 贴图类型 ##
SRGB的会标注，没有就不开     （连线的节点） 使用2的幂次方尺寸的, 有助于生成Mipmap并进行流送。
*基础颜色贴图（Base Color）* SRGB     Diffuse、BaseColor、Albedo、D、BC
基础颜色贴图定义了物体在无光照情况下的颜色。它储存了非导体的漫反射色和金属导体的镜面反射值。（使用RGB）
*法线贴图（Normal Map、紫色）*
法线贴图用于增加表面的细节，使其看起来更加立体。它通过影响模型表面的阴影来表达凹凸效果。(使用RGB)
*高光贴图（Specular Map）*
高光贴图用于表现光线照射到模型表面时的反射属性，从而区分不同材质的反光程度。
*粗糙度贴图（Roughness Map、灰色）* 
粗糙度贴图使用黑白颜色来定义材质的粗糙度。白色表示完全粗糙，黑色表示光滑。（使用R/G/B）

# PBR #
PBR: Physics-based rendering，基于物理渲染。Unity、Unreal着色器的默认实现。

# GPUSkinMesh #

# FFT Ocean #