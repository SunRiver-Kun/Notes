*é™åˆ¶çš„ä½¿ç”¨*
class, import, export, let, for(var v of arr), ...agrs, const, function(arg=1), Array/List.find, "".startsWith

*å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯*
æ“ä½œ	å®¢æˆ·	æœåŠ¡
typeof	string	object    ee.String
toString string	{...}
print	ç›´æ¥	è¿è½¬

ee.XXXXæ˜¯æœåŠ¡å™¨å¯¹è±¡(object)ï¼Œè½¬ä¸ºæœ¬åœ°è¦ç”¨getInfo([fn(value)])  å¦‚æœæ²¡fnå°±æ˜¯é˜»å¡çš„
ee.XXX.evaluate(function(value) { ui.Label })

*æ•°ç»„*
List  --> .length  å±æ€§
ee.List -> .length()  å‡½æ•°

ui.data.ActiveList{  //æ“ä½œå¯¹è±¡ï¼Œä¼šå½±å“UIçš„è¡¨ç°
	add(element)
	remove(element)
	insert(index, element)
	reset(list)
	set(index, element)
	
	get(index)
	length()

}

*å¤šæ–‡ä»¶è°ƒç”¨*
//module.js
exports.str = "";
exports.fn = function() { ... };
exports:
1. å¼•ç”¨è¿˜æ˜¯å¼•ç”¨ï¼Œä½†ä¸ä¼šå˜åŒ–
2. è¿”å›å€¼æ˜¯objæ—¶å®¹æ˜“æ ˆæº¢


//main.js
Number.prototype._G = {};
var _G = Number.prototype._G;

var sr = require('users/sunriverkun/gee_test:module.js');
sr.fn( std.str )
require: 
1. æ— æ³•åœ¨å‡½æ•°å†…requireæ–°çš„æ–‡ä»¶
2. requireçš„å‚æ•°åªèƒ½æ˜¯å¸¸é‡ï¼Œå³"..."ï¼Œä¸æ¥å—ä»»ä½•path

*UI*
print(ui)   å¯ä»¥åœ¨æ§åˆ¶å°é‚£æ˜¾ç¤ºï¼Œä½†ä¸ä¼šåœ¨å‘å¸ƒä¸Šçš„ç½‘ç«™ä¸Šæ˜¾ç¤º
 ui{	//è¿”å›ä¸€ä¸ªæ–°å®ä¾‹
	root()	-->  æ ¹Panelï¼Œé»˜è®¤åªæœ‰ä¸ªmapï¼Œä¸”layoutæ˜¯æ°´å¹³
	Map(){	--> Mapæ˜¯è¿™ä¸ªçš„ä¸€ä¸ªå®ä¾‹	 Map.drawingTools()   è®¾ç½®positionåï¼Œåªæœ‰ä¸€ä¸ªUIæ— æ³•è°ƒæ•´ä½ç½®
		var ndviParams = {min: -1, max: 1, palette: ['blue', 'white', 'green']};
		Map.addLayer(image.select('BandName'), ndviParams, 'LayerName');
	}
	style(){
		set(key, value)   -->  è®¾ç½®å±æ€§    key:str, value:...    
		set({ key:value })
		.keyè·å–å€¼
		{
			position: "top/middle/bottom-left/center/right"
			layout(Panel): ui.Panel.Layout.flow("horizontal"/"vertical")		absolute
			stretch: "horizontal/vertical/both",  //hL-hSåªå ä¸€é¡µ  hL-vSåŒ¹é…é«˜æ»šåŠ¨æ¡
			height, maxHeight, minHeight (e.g. '100px')
			width, maxWidth, minWidth (e.g. '100px')
			padding(å‘å¤–å¡«å……backgroundColor),   auto è‡ªåŠ¨åŒ¹é…å­widgetçš„æ¡†   10%  ç™¾åˆ†ç™¾
			margin(è·ç¦»ä¸Šä¸ªwidget) ('4px 4px 4px 4px' or  '4px')  ä¸Šå³ä¸‹å·¦  |  ä¸Šä¸‹ å·¦å³     margin auto å±…ä¸­
			color, backgroundColor (e.g. 'red' or '#FF0000')  å¯ä»¥æœ‰é€æ˜åº¦
			border (e.g. '1px solid black')
			fontSize (e.g. '24px')
			fontWeight (e.g. 'bold' or '100')
			fontFamily (e.g. 'monospace' or 'serif')
			textAlign (e.g. 'left' or 'center')
			textDecoration (e.g. 'underline' or 'line-through')
			whiteSpace (e.g. 'nowrap' or 'pre')
			shown (true or false)
		}
	}
	
	Panel{
		layout: ui.Panel.Layout.flow("horizontal"/"vertical")		absolute
		 style: {width: '300px'}
	}

	Panel()
	Label("string")		 æ— æ³•æ¢è¡Œ
	Button({ label:"str",  onClick: function(){ ... } })	coloræ”¹texté¢œè‰²ï¼ŒbackgroundColoræ”¹å¤–æ¡†é¢œè‰²ï¼Œå†…æ¡†æ”¹ä¸äº†
	Checkbox("string", true)  -->   onChange( function(checked){ ... } )
	Slider()	-->  settValue(1)     onChange( function(value){ ... } )
	DateSlider
	Textbox(placeholder:"str")   -->  onChange(text){  } 
	Select({ items: Object.keys(tb) })  -->  onChange(key)
	Chart
	Thumbnail	-->  é¢„è§ˆå›¾ç‰‡	
	SplitPanel

	å›¾ç‰‡ï¼šä½¿ç”¨imageURL   https://fonts.google.com/icons
	1. å›¾æ ‡ -> ui.Label("", { padding: "24px", backgroundColor:"red"  })  --coloræ— ç”¨
	2. å›¾ç‰‡ -> ui.Label("hover", { backgroundColor:"FFFFFFF0" } , imageURL)   ui.Button... æ— æ³•æ”¹å›¾ç‰‡çš„å¤§å°ï¼Œæœ‰äº›å›¾æœ‰è¾¹æ¡†
	3. è¡¨æƒ… -> æŒ‰window+. æˆ–åœ¨Edgeä¸­æŒ‰å³Ctrlå·¦è¾¹çš„åˆ—è¡¨ğŸš—

	data{
		ActiveList{
			ActiveList(list)
			add(element)
			insert(index,element)
			get(index)
			length()
			remove(element)
			reset(list={}) ç”¨listè¦†ç›–å½“å‰çš„åˆ—è¡¨
			set(index, element)
			getJsArray() --> List<Object>
		}
	}
}


*å‡ ä½•*
ee.Geometry.Polygon

//ee.Objectï¼ˆæœåŠ¡å™¨å¯¹è±¡ï¼‰æ˜¯ä¸å¯å˜çš„ï¼Œä¸€èˆ¬è¿”å›çš„æ˜¯copy
Image{	//åŸºæœ¬å…‰æ …åŒ–å›¾åƒ
	Image('JAXA/ALOS/AW3D30/V2_2')
	select('BandName', 'B2', ...)  -->è·å¾—æ­¤æ³¢æ®µçš„ Image
	select(['BandName1','BandName2'], ['NewName1, NewName2'])  -->é‡å‘½å Image
	set('å±æ€§å', 'value') --> copy Image
}
ImageCollection{	//å›¾ç‰‡çš„é›†åˆ
ee.ImageCollection('COPERNICUS/S2_SR')
	.filterBounds(ee.Geometry.Point(-70.48, 43.3631))
	.filterDate('2019-01-01', '2019-12-31')
	.sort('CLOUDY_PIXEL_PERCENTAGE')
	.first() -> Image
	.map(function(Image){ return Image; })	--> mapæœåŠ¡å™¨å¹¶è¡Œæ¯ä¸ªå…ƒç´ (æ— æ³•ç”¨print)ï¼Œå¹¶è¦æ±‚è¿”å›åŒç±»å‹æˆ–Image, ImageCollection, Feature, FeatureCollectionä¹‹ä¸€

	minã€medianã€maxã€mode(æœ€å¤š)ã€mean(å‡å€¼)ã€  æ¯ä¸ªæ³¢æ®µåˆ†å¼€å–å€¼ï¼Œæœ€ååˆæˆå‡ºæ–°å›¾ï¼Œå¤šç”¨äºä¸åŒæ—¶æœŸçš„åŒä¸€åœ°åŒº
	mosaic é¡ºåºåˆæˆå…¨éƒ¨å›¾åƒï¼Œæ¯ä¸ªåƒç´ ï¼Œæ‰€ä»¥sort("äº‘", false)é€’å‡çš„æ¯”è¾ƒå¥½	 å¤šç”¨äºä¸åŒåœ°åŒºçš„
		SENSOR_IDä¼šä¸¢å¤±å¯¼è‡´ee.Algorithms.Landsat.simpleCloudScoreæ— æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥set("SENSOR_ID", "OLI_TIRS") //5->TM | 7->ETM | 8->OLI_TIRS
	qualityMosaic(bandName)  åˆæˆå…¨éƒ¨å›¾åƒï¼Œæ¯ä¸ªåƒç´ ç”¨bandNameæœ€å¤§çš„imageçš„å€¼

	function ClearCloud(image) {
    // Add a cloud score band.  It is automatically called 'cloud'.
    var scored = ee.Algorithms.Landsat.simpleCloudScore(image);
    // Create a mask from the cloud score and combine it with the image mask.
    var mask = scored.select(['cloud']).lte(20);
    // Apply the mask to the image and display the result.
    var masked = image.updateMask(mask);
    return masked;
	}


	map(function(image) { return image; })
	limit(num[, ...])
	merge(collection
	size()
}
GeometryåŸºæœ¬çŸ¢é‡æ•°æ®
Feature,æœ‰å±æ€§çš„çŸ¢é‡æ•°æ®{
	getString("")  --> ee.String --> ee.String.compareTo("str")  æ— æ³•ç›´æ¥==
}
FeatureCollectionFeatureçš„é›†åˆ
Reducerç»Ÿè®¡å’Œåˆ†ç±»çš„å¯¹è±¡
Joiné›†åˆåˆ†ç±»
Arrayæ•°ç»„->å¤šç»´åˆ†æ

*Filter*
ee.Filter.eq/neq/gt/gte/lt/lte('å­—æ®µ','å­—æ®µå€¼');
ee.Filter.maxDifference('æœ€å¤§å·®å€¼','å­—æ®µ','å­—æ®µæ•°å€¼');
ee.Filter.stringStartsWith('å­—æ®µ'ï¼Œ'èµ·å§‹å­—ç¬¦ä¸²')  
ee.Filter.stringEndsWith('å­—æ®µ'ï¼Œ'æœ«å°¾å­—ç¬¦ä¸²')
ee.Filter.rangeContains('å­—æ®µ'ï¼Œ'èµ·å§‹å­—æ¯', 'ç»ˆæ­¢å­—æ¯');
ee.Filter.listContains('å­—æ®µ'ï¼Œ'åˆ—è¡¨å†…åŒ…å«å€¼');
ee.Filter.inlist('å­—æ®µ'ee.List('A', 'B'));
ee.Filter.calendarRange(day1, day2, 'day_of_year');
ee.Filter.calendarRange(day1, day2, 'day_of_year');
ee.Filter.day_Of_Year(day1, day2);
ee.Filter.and(filter_A, filter_B);
ee.Filter.or(filter_A, filter_B);
filter_1.not();

*NDVI*
NDVI = (NIR - red)/(NIR + red)

var nir = image.select('B5');
var red = image.select('B4');
var ndvi = nir.subtract(red).divide(nir.add(red)).rename('NDVI');
//var ndvi = image.normalizedDifference(['B5', 'B4']).rename('NDVI');
Map.centerObject(image, 9);
var ndviParams = {min: -1, max: 1, palette: ['blue', 'white', 'green']};	//blue:-1  green:1
Map.addLayer(ndvi, ndviParams, 'NDVI image');
var addNDVI = function(image) {
  var ndvi = image.normalizedDifference(['B5', 'B4']).rename('NDVI');
  return image.addBands(ndvi);
};

// Test the addNDVI function on a single image.  
//var ndvi = addNDVI(image).select('NDVI');
var withNDVI = ImageCollection.map(addNDVI);